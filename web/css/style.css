
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:Calibri,system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
.app{display:grid;grid-template-columns:240px 1fr 340px;min-height:100vh}
.sidebar{background:#fff;border-right:1px solid var(--br);padding:14px;display:flex;flex-direction:column;gap:8px}
.sidebar .logo{display:flex;align-items:center;gap:10px;margin-bottom:6px}
.navbtn{display:flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;border:1px solid var(--br);background:#fff;box-shadow:var(--accent-shadow);cursor:pointer;font-weight:800}
.navbtn.active{outline:2px solid #bcd8ff}
.center{display:flex;flex-direction:column;min-height:100vh}
.top{display:flex;align-items:center;gap:10px;padding:12px 16px}
.chip{background:#fff;padding:8px 12px;border-radius:999px;font-weight:800;box-shadow:var(--accent-shadow);display:flex;align-items:center;gap:6px}
.canvas{padding:16px}
.stage-wrap{width:960px;margin:0 auto}
.stage{background:#fff;border-radius:20px;margin:0 auto;width:960px;height:540px;position:relative;box-shadow:0 12px 40px rgba(20,30,50,.12);overflow:hidden}
.grid{position:absolute;inset:0;background-image:radial-gradient(circle at 10px 10px,rgba(170,180,200,.25) 1px,transparent 1px);background-size:20px 20px}
.glow{position:absolute;inset:0;background:radial-gradient(600px 300px at 15% 15%,rgba(255,122,200,.35),transparent 55%),radial-gradient(600px 300px at 85% 30%,rgba(154,216,255,.35),transparent 55%);pointer-events:none;mix-blend-mode:screen}
.canvas-abs{position:absolute;inset:0;transform-origin:0 0}
.element{position:absolute;user-select:none;touch-action:none;border-radius:12px;overflow:hidden;display:flex;align-items:center;justify-content:center;text-shadow:0 1px 3px rgba(0,0,0,.3)}
.pill{background:var(--pill);border-radius:18px;box-shadow:0 10px 30px rgba(120,60,140,.18)}
.goal{background:#eef1f6b0;border-radius:18px;backdrop-filter:blur(6px);box-shadow:inset 0 0 0 1px rgba(100,120,150,.18)}
.label{position:absolute;top:-28px;left:0;font-weight:800;letter-spacing:.02em}
.sel{outline:2px dashed #8fb6ff;border-radius:12px;position:absolute;display:none;transform-origin:0 0}
.h{position:absolute;width:10px;height:10px;background:#fff;border:1px solid #6ea1ff;border-radius:50%;box-shadow:0 1px 2px rgba(0,0,0,.2)}
.h.n{top:-6px;left:50%;transform:translate(-50%,-50%)}
.h.s{bottom:-6px;left:50%;transform:translate(-50%,50%)}
.h.e{right:-6px;top:50%;transform:translate(50%,-50%)}
.h.w{left:-6px;top:50%;transform:translate(-50%,-50%)}
.h.nw{left:-6px;top:-6px}.h.ne{right:-6px;top:-6px}.h.sw{left:-6px;bottom:-6px}.h.se{right:-6px;bottom:-6px}
.right{background:#fff;border-left:1px solid var(--br);overflow:auto}
.section{padding:12px}.view[hidden]{display:none!important}
.prop label{display:block;font-size:12px;color:#5d6676;margin-top:10px}
.prop input,.prop select{width:100%;padding:10px 12px;border:1px solid var(--br);border-radius:10px;font:600 14px Calibri,"Segoe UI"}
.row{display:flex;gap:10px;flex-wrap:wrap}
.toolbar{display:flex;gap:10px;padding:12px;justify-content:center;position:sticky;bottom:0;z-index:10;background:var(--bg);margin-top:auto}
button{cursor:pointer;border:1px solid var(--br);border-radius:12px;padding:10px 12px;background:#fff;box-shadow:var(--accent-shadow);font-weight:800;display:flex;align-items:center;gap:6px}
.ico{display:inline-flex;align-items:center}
